use OT4
go

-- Insert data into ingredients table

INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I101','2023-09-07','2023-01-01','Romaine Lettuce',2,10,'Anna Food Distributors','head');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I102','2023-09-08','2023-11-01','Croutons',1,20,'Anna Food Distributors','box');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I103','2023-09-18','2023-01-21','Parmesan Cheese',5,5,'Anna Food Distributors','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I104','2023-09-28','2023-01-31','Caesar Dressing',3,10,'Bob''s Produce','fl oz');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I105','2023-10-08','2023-02-10','Chicken Wings',3,10,'Bob''s Produce','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I106','2023-10-18','2023-02-20','Buffalo Sauce',2,10,'Bob''s Produce','fl oz');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I107','2023-10-28','2023-03-02','BBQ Sauce',2,10,'Charlie''s Meats','fl oz');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I108','2023-11-07','2023-03-12','Teriyaki Sauce',2,10,'Charlie''s Meats','fl oz');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I109','2023-11-17','2023-03-22','Calamari',5,10,'Charlie''s Meats','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I110','2023-11-27','2023-04-01','Marinara Sauce',2,10,'Dan''s Seafood','fl oz');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I111','2023-12-07','2023-04-11','Shrimp',10,10,'Dan''s Seafood','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I112','2023-12-17','2023-04-21','Cocktail Sauce',2,10,'Dan''s Seafood','fl oz');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I113','2023-12-27','2023-05-01','Lemon Wedges',1,10,'Eve''s Bakery','each');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I114','2024-01-06','2023-05-11','Clams',10,10,'Eve''s Bakery','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I115','2024-01-16','2023-05-21','Potatoes',2,10,'Eve''s Bakery','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I116','2024-01-26','2023-05-31','Onions',1,10,'Frank''s Dairy','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I117','2024-02-05','2023-06-10','Celery',1,10,'Frank''s Dairy','stalk');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I118','2024-02-15','2023-06-20','Steak',10,10,'Frank''s Dairy','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I119','2024-02-25','2023-06-30','Blue Cheese Crumbles',5,10,'Grace''s Grocery','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I120','2024-03-06','2023-07-10','Salmon',10,10,'Grace''s Grocery','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I121','2024-03-16','2023-07-20','Rice Pilaf',2,10,'Grace''s Grocery','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I122','2024-03-26','2023-07-30','Steamed Vegetables',2,10,'Hank''s Beverages','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I123','2024-04-05','2023-08-09','Chicken Breast',5,10,'Hank''s Beverages','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I124','2024-04-15','2023-08-19','Spaghetti',2,10,'Hank''s Beverages','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I126','2024-04-25','2023-08-29','Mozzarella Cheese',5,10,'Ivy''s Ice Cream','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I127','2024-05-05','2023-09-08','Pancetta',5,10,'Ivy''s Ice Cream','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I128','2024-05-15','2023-09-18','Eggs',2,10,'Jack''s Snacks','dozen');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I129','2024-05-25','2023-09-28','Parmesan Cheese',5,10,'Jack''s Snacks','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I130','2024-06-04','2023-10-08','Fettuccine Pasta',2,10,'Jack''s Snacks','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I131','2024-06-14','2023-10-18','Grilled Chicken',5,10,'Dan''s Seafood','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I132','2024-06-24','2023-10-28','Alfredo Sauce',2,10,'Eve''s Bakery','fl oz');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I133','2024-07-04','2023-11-07','Shrimp',10,10,'Eve''s Bakery','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I134','2024-07-14','2023-11-17','Garlic Butter',2,10,'Eve''s Bakery','fl oz');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I135','2024-07-24','2023-11-27','White Wine',2,10,'Grace''s Grocery','fl oz');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I136','2024-08-03','2023-12-07','Linguine',2,10,'Grace''s Grocery','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I137','2024-08-13','2023-12-17','Beef Tips',10,10,'Jack''s Snacks','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I138','2024-08-23','2023-12-27','Mushrooms',2,10,'Dan''s Seafood','lb');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I140','2024-09-02','2024-01-06','Sour Cream',2,10,'Grace''s Grocery','fl oz');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I141','2024-01-15','2022-01-01','Apple',5,10,'S114','kg');
INSERT INTO ingredients (ingredient_id, expiry_date, manufacturing_date, ingredient_name, price, quantity, supplier_name, unit) VALUES('I142','2024-01-15','2022-01-01','Cocoa',5,10,'S114','kg');

SELECT * FROM ingredients;


-- Insert data into items TABLE
INSERT INTO items (id, name, price, description, on_special) VALUES('F101','Caesar Salad',15,'A classic salad with romaine lettuce; croutons; parmesan cheese; and Caesar dressing',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('F102','Chicken Wings',17,'Deep-fried chicken wings with your choice of sauce: Buffalo; BBQ; or Teriyaki',1);
INSERT INTO items (id, name, price, description, on_special) VALUES('F103','Calamari',20,'Lightly breaded and fried squid rings served with marinara sauce',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('F104','Shrimp Cocktail',23,'Chilled shrimp served with cocktail sauce and lemon wedges',1);
INSERT INTO items (id, name, price, description, on_special) VALUES('F105','Clam Chowder',13,'A creamy soup made with clams; potatoes; onions; and celery',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('F106','New England Clam Chowder',13,'A creamy soup made with clams; potatoes; onions; and celery',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('F107','Manhattan Clam Chowder',13,'A tomato-based soup made with clams; potatoes; onions; and celery',1);
INSERT INTO items (id, name, price, description, on_special) VALUES('F108','Chicken Caesar Salad',17,'A classic Caesar salad topped with grilled chicken breast',0);

INSERT INTO items (id, name, price, description, on_special) VALUES('F109','Steak Salad',20,'A salad with grilled steak; mixed greens; cherry tomatoes; and blue cheese crumbles',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('F110','Grilled Salmon',23,'Grilled salmon fillet served with rice pilaf and steamed vegetables',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('F111','Chicken Parmesan',21,'Breaded chicken breast topped with marinara sauce and melted mozzarella cheese; served with spaghetti',1);



INSERT INTO items (id, name, price, description, on_special) VALUES('B101','Coca-Cola',2,'A carbonated soft drink made with cola flavoring and caffeine',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B102','Pepsi',2,'A carbonated soft drink made with cola flavoring and caffeine',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B103','Sierra Mist',2,'A carbonated soft drink made with lemon-lime flavoring',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B104','Mountain Dew',2,'A carbonated soft drink made with citrus flavoring and caffeine',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B105','Dr. Pepper',2,'A carbonated soft drink made with 23 flavors',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B106','Sprite',2,'A carbonated soft drink made with lemon-lime flavoring',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B107','7-Up',2,'A carbonated soft drink made with lemon-lime flavoring',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B108','Fanta',2,'A carbonated soft drink made with fruit flavoring',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B109','Barq''s Root Beer',2,'A carbonated soft drink made with root beer flavoring',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B110','A&W Root Beer',2,'A carbonated soft drink made with root beer flavoring',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B111','Sunkist',2,'A carbonated soft drink made with orange flavoring',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B112','Canada Dry',2,'A carbonated soft drink made with ginger flavoring',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B115','Apple Juice',2,'A non-carbonated soft drink made with apple juice',0);
INSERT INTO items (id, name, price, description, on_special) VALUES('B116','Coconut Water',2,'A non-carbonated soft drink made with coconut water',0);


SELECT * FROM items;


-- Insert data into foods table

INSERT INTO foods (id, preparation_time, serving_time, type) VALUES('F101',15,5,'APPETIZER');
INSERT INTO foods (id, preparation_time, serving_time, type) VALUES('F102',20,10,'APPETIZER');
INSERT INTO foods (id, preparation_time, serving_time, type) VALUES('F103',25,15,'APPETIZER');
INSERT INTO foods (id, preparation_time, serving_time, type) VALUES('F104',10,5,'APPETIZER');
INSERT INTO foods (id, preparation_time, serving_time, type) VALUES('F105',30,20,'APPETIZER');
INSERT INTO foods (id, preparation_time, serving_time, type) VALUES('F106',30,20,'APPETIZER');
INSERT INTO foods (id, preparation_time, serving_time, type) VALUES('F107',30,20,'APPETIZER');
INSERT INTO foods (id, preparation_time, serving_time, type) VALUES('F108',15,5,'MAIN_COURSE');
INSERT INTO foods (id, preparation_time, serving_time, type) VALUES('F109',20,10,'MAIN_COURSE');
INSERT INTO foods (id, preparation_time, serving_time, type) VALUES('F110',25,15,'MAIN_COURSE');
INSERT INTO foods (id, preparation_time, serving_time, type) VALUES('F111',30,20,'MAIN_COURSE');


SELECT * FROM foods;

-- Insert data into beverages table

INSERT INTO beverages (id, size, supplier_name) VALUES('B101','MEDIUM','Anna Food Distributors');
INSERT INTO beverages (id, size, supplier_name) VALUES('B102','MEDIUM','Anna Food Distributors');
INSERT INTO beverages (id, size, supplier_name) VALUES('B103','MEDIUM','Anna Food Distributors');
INSERT INTO beverages (id, size, supplier_name) VALUES('B104','MEDIUM','Bob''s Produce');
INSERT INTO beverages (id, size, supplier_name) VALUES('B105','MEDIUM','Bob''s Produce');
INSERT INTO beverages (id, size, supplier_name) VALUES('B106','MEDIUM','Bob''s Produce');
INSERT INTO beverages (id, size, supplier_name) VALUES('B107','MEDIUM','Bob''s Produce');
INSERT INTO beverages (id, size, supplier_name) VALUES('B108','MEDIUM','Charlie''s Meats');
INSERT INTO beverages (id, size, supplier_name) VALUES('B109','MEDIUM','Charlie''s Meats');
INSERT INTO beverages (id, size, supplier_name) VALUES('B110','MEDIUM','Dan''s Seafood');
INSERT INTO beverages (id, size, supplier_name) VALUES('B111','MEDIUM','Dan''s Seafood');
INSERT INTO beverages (id, size, supplier_name) VALUES('B112','MEDIUM','Dan''s Seafood');
INSERT INTO beverages (id, size) VALUES('B115','MEDIUM');
INSERT INTO beverages (id, size) VALUES('B116','MEDIUM');

SELECT * FROM beverages;


-- Insert data into items_ingredients table

INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('B115','I141');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('B116','I142');


INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F101','I101');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F101','I102');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F101','I103');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F101','I104');


INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F102','I106');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F102','I107');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F102','I108');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F102','I109');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F102','I110');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F102','I102');


INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F103','I114');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F103','I115');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F103','I116');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F103','I117');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F103','I118');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F103','I119');


INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F104','I122');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F104','I123');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F104','I124');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F104','I126');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F104','I127');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F104','I128');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F104','I129');


INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F105','I118');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F105','I119');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F105','I120');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F105','I121');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F105','I122');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F105','I123');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F105','I124');

INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F108','I115');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F108','I101');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F108','I102');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F108','I103');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F108','I104');


INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F109','I116');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F109','I119');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F109','I120');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F109','I121');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F109','I122');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F109','I123');
INSERT INTO items_ingredients (item_id, ingredient_id) VALUES('F109','I124');


SELECT * FROM items_ingredients;


--b) Liệt kê danh sách mặt hàng(Item) là món đặt biệt của nhà hàng mà có sử dụng nguyên 
--liệu được nhập từ nhà cung cấp nào đó khi biết tên nhà cung cấp (tìm tương đối, không phân biệt 
--chữ thường hoa).

select f.id,f.type,f.preparation_time,f.serving_time from items i join items_ingredients iin on i.id=iin.item_id join ingredients im on iin.ingredient_id=im.ingredient_id join foods f on f.id=i.id
where im.supplier_name like '%food%'
group by f.id,f.type,f.preparation_time,f.serving_time


--c) Tính giá gốc của từng món ăn sau khi chế biết thành phẩm. Kết quả sắp xếp giảm  dần theo đơn giá gốc.
--Trong đó: Giá gốc món ăn = (số lượng nguyên liệu * đơn giá nguyên liệu) + (thời gian chuẩn bị + thời gian phục vụ) * 0.2$

select  f.id, sum(im.quantity*im.price) +(f.preparation_time+f.serving_time)*0.2 as donGiaGoc from items i join items_ingredients iin on i.id=iin.item_id join ingredients im on iin.ingredient_id=im.ingredient_id join foods f on f.id=i.id
group by f.id,f.preparation_time,f.serving_time
order by donGiaGoc desc

